"0","set.seed(20394)"
"0","suppressPackageStartupMessages(require(mvtnorm))"
"0","library(ggplot2)"
"0","# Sample Size"
"0","N <- 50"
"0",""
"0","# True population correlation"
"0","rho <- .8"
"0","null_correlation <- 0.8"
"0","R <- 5000"
"0",""
"0","sigma <- array(c(1,rho,rho,1), c(2,2))"
"0","mu <- c(0,0)"
"0",""
"0","detect <- rep(NA, R)"
"0","for(i in 1:R){"
"0","  data <- rmvnorm(N, mean = mu, sigma = sigma)"
"0","  # Measurement A is data[,1]"
"0","  # Measurement B is data[,2]"
"0","  # Option Alternative = ""greater"" is one-sided 95% CI"
"0","  results <- cor.test(x = data[,1], y = data[,2], alternative = ""greater"")"
"0","  "
"0","  # Test is lower bound is strictly greater than 0.8"
"0","  detect[i] <- results$conf.int[1] > null_correlation"
"0","}"
"0","power <- mean(detect)"
